{% extends "base.html" %}
{% load static %}

{% block title %}Purchase Credits - Imagi{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'payments/styles.css' %}">
{% endblock %}

{% block extra_js %}
<script src="https://js.stripe.com/v3/" defer></script>
{% endblock %}

{% block navbar %}
<div class="corner-brand">
    <a class="navbar-brand" href="{% url 'landing_page' %}">
        <div class="logo-placeholder"></div>
        Imagi
    </a>
</div>
{% endblock %}

{% block content %}
<div class="checkout-wrapper">
    <div class="checkout-inner">
        <h2>Purchase Credits</h2>
        
        <div class="checkout-section">
            <div class="credit-selection">
                <label for="credit_amount">Enter Amount ($5.00 - $100.00):</label>
                <div class="credit-input-wrapper">
                    <span class="currency-symbol">$</span>
                    <input 
                        type="number" 
                        name="credit_amount" 
                        id="credit_amount" 
                        class="credit-input" 
                        min="5" 
                        max="100" 
                        step="0.01"
                        value="5.00"
                        required
                    >
                </div>
                <div id="amount-error" class="error-message hidden"></div>
                <div class="credits-preview">
                    You will receive: <span id="credits-amount">5</span> credits
                </div>
            </div>
        </div>

        <div class="checkout-section">
            <form id="payment-form">
                {% csrf_token %}
                <div class="payment-element-container">
                    <div id="payment-element">
                        <!-- Stripe.js will insert the Payment Element here -->
                    </div>
                </div>
                <button id="submit" class="payment-button">
                    <div class="spinner hidden" id="spinner"></div>
                    <span id="button-text"><i class="fas fa-lock"></i> Pay now</span>
                </button>
                <div id="payment-message" class="hidden"></div>
            </form>

            <div class="secure-badge">
                <i class="fas fa-shield-alt"></i>
                <span>Secure Payment by Stripe</span>
            </div>
        </div>

        <div class="auth-links">
            <p><a href="{% url 'landing_page' %}">Cancel and Return Home</a></p>
        </div>
    </div>
</div>

<!-- Rest of your existing script -->
{% endblock %} 